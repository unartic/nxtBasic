# File Handling 

File handling in nxtBasic allows your programs to read from and write to files on storage devices aswell as saving and reading files from and to memory. This section will cover the basic operations of opening, reading, writing, and closing files.

# Opening a File
To open a file, use the OPEN statement. You specify the file number, device number, and file name.

**Syntax:**

    OPEN fileNumber, deviceNumber, channel, "filename"


- fileNumber: A unique number identifying the file between 1 and 13 (14 is used internaly by nxtBasic and therefor can better not be used)
- deviceNumber: The number of the device (8 for disk drive, 1 for tape, etc.) You'll normaly always set it to 8.
- channel: The communication channel. Use 0 for reading and 1 for writing
- filename: The name of the file
  
**Example:**

    OPEN 1,8,0,"FILE.TXT"   'open file for reading
    OPEN 2,8,1,"FILE.TXT"   'open file for writing

# Reading from a File
To read data from an opened file, use the INPUT# or GET# statement.

## INPUT# statement
Reads a line, ended by a linefeed (chr 13) from the file.

**Syntax:**

    variable$ = INPUT#(fileNumber)

**Example:**
    
    OPEN 1,9,0,"FILE.TXT"
    a$ = INPUT#(1)
    PRINT "The first line of this file is: " 
    PRINT a$
    CLOSE 1

## BINPUT#
Reads a block of data from an open file and stores it in a string variable. 

**Syntax:**

    variable$ = BINPUT#(filenumber,length)

**Example:**

    OPEN 1,9,0,"FILE.TXT"
    a$ = BINPUT#(1,15)
    PRINT "The first 15 bytes of the file are: " 
    PRINT a$
    CLOSE 1

## GET# statement

Reads one byte from an open file.

**Syntax:**

    variable$ = GET#(fileNumber)

**Example:**

    OPEN 1,9,0,"FILE.TXT"
    a$ = GET#(1)
    PRINT "The first byte of this file is: " + a$
    CLOSE 1
 

# Writing to a File
To write data to an opened file, use the PRINT#.

**Syntax:**

    PRINT# fileNumber, expression
    
**Example:**

    OPEN 2,8,1,"FILE.TXT"
    PRINT# 2, "This is a line of text"
    PRINT# 2, "Another line"
    CLOSE 2
    
By ending the statement with a semicolon a linefeed (chr 13) will not be written to the file.

    OPEN 2,8,1,"FILE.TXT"
    PRINT# 2, "This is a line of text";
    PRINT# 2, "Another line"
    CLOSE 2

# Closing a File
Always close files when you are done with them to free up system resources.

**Syntax:**

    CLOSE fileNumber

**Example:**

    OPEN 1,8,0,"FILE.TXT"
    ' ... read from the file ...
    CLOSE 1

# Checking for End of File
After a read, you can check with EOF if the end of an opened file has been reached during the last read statement.

**Syntax:**


    status = EOF
    
**Example:**

    OPEN 1,8,0,"FILE.TXT"
    ReadLoop:
        a$ = a$ + GET#(1)
        IF EOF THEN Goto ReachedEOF
    Goto ReadLoop
    ReachedEOF:
    CLOSE 1

# FILEEXISTS function

To check if a file exists in the current directory, you can use FILEEXISTS.

**Syntax:**

    result = FILEEXISTS(filename,devicenumber)
    
**Example:**
    
    IF FILEEXISTS("FILE.TXT",8) THEN
        'Execute code when the file exists
    ELSE
        'Execute code when the file does not exists
    END IF

# BLOAD
Loads a binary file directly into ram. This function can best be used to load a file into highram.

If a file does not fit in one rambank (8kb), consequtive rambanks will be used automaticly.

After this function has been used, you can check memory location $00 to find the last used rambank, and memortlocations $030D and $030E for the address of the final byte loaded plus 1.

**Syntax:**

    BLOAD filename, device, bank, address
    
- Filename: the name of the file y ou want to load
- device: usualy 8 for disk drive
- bank: the bank to start writing the contents of the file
- address: the address where writing should start

**Examples:**

    'LOADS A FILE NAMED DATAFILE.BIN FROM DEVICE 8 STARTING IN BANK 15 AT $A000
    BLOAD "DATAFILE.BIN",8,15,$A000  

## BSAVE
Saves a portion of ram to a file.

**Syntax:**

    BSAVE filename, device, bank, startaddress, endaddress

- Filename: the name of the file y ou want to load
- device: usualy 8 for disk drive
- bank: the bank to start reading the content to write to a file
- startaddress: save memory starting at this address
- endaddress: the end of the memory region you want to save

**Examples:**

    ' SAVES MEMORY FROM $A000 IN BANK 1 TO $BFFF, STOPPING BEFORE $C000
    BSAVE "MEMORY.DMP",8,1,$A000,$C000 




